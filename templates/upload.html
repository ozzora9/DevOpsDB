{% extends "base.html" %} {% block title %}사진 업로드 -
ColorWalk{%endblock %} {% block body_class %}upload-page{% endblock %}
{% block main_class %}upload-container{% endblock %} {% block content
%}

<form id="upload-form" method="POST" enctype="multipart/form-data">
  <!-- 🎨 선택된 색상 hidden으로 전달 -->
  <input
    type="hidden"
    name="color_id"
    id="color_id"
    value="{{ color_id if color_id else '' }}"
  />
  <input type="hidden" name="gps_latitude" id="gps_latitude">
  <input type="hidden" name="gps_longitude" id="gps_longitude">
  
  <!-- 🎨 선택된 색상 자동 표시 영역 -->
  <section class="color-select-box">
    <h3>🎨 선택한 색상</h3>
    <div class="ai-color-card" id="color-display">
      <div class="ai-color-left">
        <div class="ai-color-sample" id="color-sample"></div>
        <div class="ai-color-info">
          <h4 id="color-name">색상이 선택되지 않았어요</h4>
          <small id="color-hex">#------</small>
        </div>
      </div>
      <button type="button" class="btn primary select-btn">
        선택됨
      </button>
    </div>
  </section>

  <!-- 📸 사진 업로드 -->
  <section class="upload-box">
    <h3>📷 사진 업로드</h3>
    <div class="upload-area">
      <div class="camera-box">
        <video class="camera-view" id="camera-view" autoplay>
          <!-- <input
            type="file"
            id="file-input"
            name="image"
            accept="image/*"
            hidden
          /> -->
          <!-- <p>
            클릭하여 사진을 선택하세요<br /><small
              >또는 드래그 앤 드롭</small
            >
          </p> -->
        </video>
        <div class="shutter-btn">
          <i class="fas fa-upload"></i>
        </div>
      </div>
    </div>
    <img
      id="preview"
      style="
        display: none;
        max-width: 100%;
        margin-top: 10px;
        border-radius: 10px;
      "
    />

    <div class="input-group">
      <label for="location">📍 위치</label>
      <input
        type="text"
        id="location"
        name="location"
        placeholder="예: 서울 성수동, 부산 해운대 등"
      />
    </div>

    <div class="input-group">
      <label for="description">📝 설명</label>
      <textarea
        id="description"
        name="description"
        rows="3"
        placeholder="이 색상과 함께한 순간에 대해 이야기해주세요."
      ></textarea>
    </div>

    <button type="submit" class="btn primary upload-btn">
      업로드하기
    </button>
  </section>
</form>
<script src="https://unpkg.com/fast-average-color@9.5.0/dist/index.browser.min.js"></script>
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}