{% extends "base.html" %}
{% block title %}My Page - ColorWalk{% endblock %}
{% block body_class %}mypage{% endblock %}
{% block main_class %}mypage-container{% endblock %}
{% block content %}

<!-- ğŸ‘¤ í”„ë¡œí•„ ì¹´ë“œ -->
<section class="profile-card">
  <div class="profile-left">
    <div class="profile-icon">
      <i class="fas fa-user"></i>
    </div>
    <div class="profile-info">
      <div class="profile-header">
        <!-- âœ… ì—¬ê¸°ëŠ” ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ -->
        <h2>{{ user_name }} <span>ë‹˜ì˜ ì»¬ëŸ¬ì›Œí¬</span></h2>
        <a href="{{ url_for('logout') }}" class="logout-btn">ğŸšª ë¡œê·¸ì•„ì›ƒ</a>
      </div>
      <p>ìƒ‰ìƒìœ¼ë¡œ ê°ì •ì„ ê¸°ë¡í•˜ëŠ” ì¤‘ ğŸŒ¸</p>
      <div class="profile-stats">
        <span>ğŸ“¸ {{ my_photos|length }}ê°œì˜ ì‚¬ì§„</span>
        <span>ğŸ’— {{ liked_photos|length }}ê°œì˜ ì¢‹ì•„ìš”</span>
        <span>ğŸ¨ ê°€ì¥ ë§ì´ ì°ì€ ìƒ‰ìƒ: <b style="color:#339af0">ğŸ’™ ë¸”ë£¨</b></span>
      </div>
    </div>
  </div>
</section>

<!-- ğŸ–¼ï¸ ë‚´ê°€ ì—…ë¡œë“œí•œ ì‚¬ì§„ / ì¢‹ì•„ìš”í•œ ì‚¬ì§„ -->
<section class="myphotos">
  <div class="tab-buttons">
    <button id="tab-my" class="active">ë‚´ê°€ ì—…ë¡œë“œí•œ ì‚¬ì§„</button>
    <button id="tab-like">ì¢‹ì•„ìš”í•œ ì‚¬ì§„</button>
  </div>

  <!-- âœ… ë‚´ê°€ ì—…ë¡œë“œí•œ ì‚¬ì§„ -->
  <div class="photo-grid" id="my-photo-grid">
    {% if my_photos %}
      {% for photo in my_photos %}
      <div class="photo-card" data-color="{{ photo[2] }}">
        <div class="photo-image" style="background-image: url('{{ photo[3] }}');"></div>
        <div class="photo-info">
          <p class="description">{{ photo[1] }}</p>
          <p class="location">ğŸ“ {{ photo[4]}}</p>
          <p class="likes">ğŸ’— {{ photo[5] }}ê°œ</p>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p class="empty">ì•„ì§ ì—…ë¡œë“œí•œ ì‚¬ì§„ì´ ì—†ì–´ìš” ğŸ“·</p>
    {% endif %}
  </div>

  <!-- âœ… ì¢‹ì•„ìš”í•œ ì‚¬ì§„ -->
  <div class="photo-grid" id="liked-photo-grid" style="display: none;">
    {% if liked_photos %}
      {% for photo in liked_photos %}
      <div class="photo-card" data-color="{{ photo[2] }}">
        <div class="photo-image" style="background-image: url('{{ photo[3] }}');"></div>
        <div class="photo-info">
          <p class="description">{{ photo[1] }}</p>
          <p class="location">ğŸ“ {{ photo[4]}}</p>
          <p class="likes">ğŸ’— {{ photo[5] }}ê°œ</p>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p class="empty">ì¢‹ì•„ìš”í•œ ì‚¬ì§„ì´ ì•„ì§ ì—†ì–´ìš” ğŸ’•</p>
    {% endif %}
  </div>
</section>

<!-- âœ… JS: íƒ­ ì „í™˜ë§Œ ì œì–´ (ìƒë‹¨ êµ¬ì¡°/ìŠ¤íƒ€ì¼ ë¶ˆë³€) -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const tabMy = document.getElementById("tab-my");
  const tabLike = document.getElementById("tab-like");
  const myGrid = document.getElementById("my-photo-grid");
  const likeGrid = document.getElementById("liked-photo-grid");

  tabMy.addEventListener("click", () => {
    tabMy.classList.add("active");
    tabLike.classList.remove("active");
    myGrid.style.display = "grid";
    likeGrid.style.display = "none";
  });

  tabLike.addEventListener("click", () => {
    tabLike.classList.add("active");
    tabMy.classList.remove("active");
    likeGrid.style.display = "grid";
    myGrid.style.display = "none";
  });
});
</script>

{% endblock %}